Build ubuntu-uefi sdcard image for raspberrypi5:

Note: need to use external fan to cool CPU for installing ubuntu iso.

Input files ../kernel/linux/tmp/lib/modules/
            ../kernel/linux/tmp/boot/

cd ~/Downloads
wget https://cdimage.ubuntu.com/releases/25.10/release/ubuntu-25.10-desktop-arm64.iso

cd ~/build-raspberrypi5/ubuntu-uefi

Plugin usb3 stick to PC.
sudo ./eraseusb3stick.sh
Eject usb3 stick from PC.

Plugin USB2 SATA ssd to PC.
sudo ./mksdcardimg.sh
sudo mkfs.vfat /dev/sda1
sudo fdisk -l /dev/sda
sudo mount /dev/sda1 /mnt
sudo 7z x ~/Downloads/RPi5_UEFI_Release.zip -o/mnt && sync
sudo 7z x ~/Downloads/ubuntu-25.10-desktop-arm64.iso -o/mnt && sync && sudo umount /mnt
Eject USB2 SATA ssd from PC.

------------------------------------------------------------------------
Install ubuntu from USB2 SATA ssd ubuntu iso to usb3 stick.
NOTE: If on board fan is not turned on, use external fan.
      To minimize EMI interference, put usb3 stick to rpi5 top USB3 socket,
      Put keyboard mouse to rpi5 bottom USB2 socket with USB2 extention cable.
      Put USB2 SATA ssd to rpi5 bottom USB3 socket.
------------------------------------------------------------------------

Plugin sdcard, usb3 stick, USB2 SATA ssd and wifi usb dongle to rpi5. Power on rpi5.

Select install
Double click Install Ubuntu LTS icon.
Erase and install Ubuntu.
Click Install now.
Contine till finished. Restart. Remove USB2 SATA ssd from rpi5. click enter. Power down rpi5.

Plugin usb3 stick to PC.
sudo fdisk -l /dev/sda
sudo mount /dev/sda1 /mnt
sudo 7z x ~/Downloads/RPi5_UEFI_Release.zip -o/mnt && sync && sudo umount /mnt
sudo e2label /dev/sda2 rootfs
sudo blkid /dev/sda1 ( write down UUID )
sudo blkid /dev/sda2 ( write down UUID )
sudo mount /dev/sda2 /mnt
sudo cp -r ../kernel/linux/tmp/lib/modules/* /mnt/lib/modules
sudo cp -r ../kernel/linux/tmp/boot/* /mnt/boot
ls -la /mnt/boot
sudo touch /mnt/boot/grub/grub.cfg
sudo vi /mnt/boot/grub/grub.cfg ( delete everything, add
set timeout=5
set default="Boot UUID"
set menu_color_normal=white/black
set menu_color_highlight=white/green

menuentry "Boot UUID" {
    search --no-floppy --fs-uuid --set=root 66686659-3df5-4d6e-9493-a141a21d8fcd
    echo    'Loading Linux 6.18.0-v8-16k+ ...'
    linux /boot/vmlinuz-6.18.0-v8-16k+ root=LABEL=rootfs rootwait rw rootdelay=10
    echo    'Loading initial ramdisk ...'
    initrd /boot/initrd.img-6.17.0-7-generic
    devicetree /boot/dtb/broadcom/bcm2712-rpi-5-b.dtb
}
)
Note: update above UUID accordingly.
sudo vi /mnt/etc/fstab ( change UUID for /boot/efi )
sudo cp ./packages/firmware-brcm80211_20250410-2_all.deb /mnt/boot
sudo cp ./packages/brcmfmac43455* /mnt/lib/firmware/brcm/
sudo cp ./packages/BCM4345C0* /mnt/lib/firmware/brcm/
sudo mkdir -p /mnt/lib/firmware/rtl_bt
sudo cp ./packages/rtl* /mnt/lib/firmware/rtl_bt/
ls -la /mnt/lib/firmware/rtl_bt
sync; sudo umount /mnt;
Eject usb3 stick from PC.

Plugin usb3 stick and ethernet cable  to rpi5, Remove wifi usb dongle from rpi5. Power on rpi5.
Login:
Username: linaro
Password: linaro
Disable power saving, auto suspend and screen saver.
sudo apt install net-tools openssh-server pulseaudio-utils
sudo ifconfig
uname -a
lsb_release -a
sudo dpkg-reconfigure tzdata
sudo dpkg-reconfigure locales
date
sudo apt update; sudo apt upgrade -y; sudo apt dist-upgrade -y;
sudo dpkg -i /boot/firmware-brcm80211_20250410-2_all.deb
sync
free
sudo update-initramfs -u -k $(uname -r)
sudo vi /boot/grub/grub.cfg ( change to:
   initrd /boot/initrd.img-6.18.0-v8-16k+
)
sync
sudo reboot

Remove ethernet cable from rpi5.
Forget wifi. Setup wifi.
uname -a
lsb_release -a
Check CPU speed:
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq

Check fan:
cat /proc/device-tree/cooling_fan/status
cat /sys/class/thermal/cooling_device0/type

glxinfo | grep OpenGL
date
Check if Ubuntu is running UEFI mode:
ls /sys/firmware/efi
Check display mode: ( wayland or x11 )
echo $XDG_SESSION_TYPE
Check audio driver: ( pulseaudio or pipewire )
pactl info

sudo apt install git zip rfkill speedtest-cli python3-pip python3-setuptools ffmpeg mpv glmark2-es2-wayland pandoc vlc vlc-plugin-video-output vsftpd pavucontrol

speedtest-cli --secure

glmark2-es2-wayland

aplay -l
pavucontrol  ( select hdmi as default )

firefox -> youtube.com -> search YmDNhi07_Ho

Do follows on PC, then ftp swan.mp4 to rpi5.
(
git clone https://github.com/yt-dlp/yt-dlp.git
cd yt-dlp
make
cd ../
~/yt-dlp/yt-dlp -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]' 3qrKjywjo7Q -o swan.mp4 --postprocessor-args " -c:v libx265 -b:v 2M -c:a copy"
)

mpv --hwdec=auto-copy swan.mp4
ffplay swan.mp4
cvlc --gl=wgl --glconv=any swan.mp4

Plugin ASUS USB-BT500 bluetooth usb dongle to rpi5.
sudo rfkill list
hciconfig hci0
hcitool dev
hciconfig -a
