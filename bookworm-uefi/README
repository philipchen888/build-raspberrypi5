Build bookworm-uefi sdcard image for raspberrypi5:

Input files ../kernel/linux/tmp/lib/modules/
            ../kernel/linux/tmp/boot/

cd ~/Downloads
wget https://mirror.us.mirhosting.net/debian-cd/12.11.0/arm64/iso-cd/debian-12.11.0-arm64-netinst.iso

cd ~/build-raspberrypi5/bookworm-uefi

Plugin usb3 stick to PC.
sudo ./mksdcardimg.sh
sudo mkfs.vfat /dev/sda1
sudo fdisk -l /dev/sda
sudo mount /dev/sda1 /mnt
sudo 7z x ~/Downloads/RPi5_UEFI_Release.zip -o/mnt
sudo 7z x ~/Downloads/debian-12.11.0-arm64-netinst.iso -o/mnt && sync && sudo umount /mnt
Eject usb3 stick from PC.

------------------------------------------------------------------------
Install bookworm to usb3 stick.
NOTE: If on board fan is not turned on, use external fan.
      To minimize EMI interference, put usb3 stick to rpi5 top USB3 socket,
      Put wifi usb dongle to rpi5 top USB2 socket, put keyboard mouse to rpi5 bottom
      USB2 socket with USB2 extention cable.
------------------------------------------------------------------------

Plugin usb3 stick and wifi usb dongle to rpi5. Power on rpi5.
Select install
loading missing firmware? No
User name: linaro
Manual partition, select free, Automatic, All, Finish, Yes
Select debian desktop and gnome in addition to ssh and standard system utilities.

Plugin usb3 stick to PC.
sudo fdisk -l /dev/sda
sudo e2label /dev/sda2 rootfs
sudo blkid /dev/sda1 ( write down UUID )
sudo blkid /dev/sda2 ( write down UUID )
sudo mount /dev/sda2 /mnt
sudo cp -r ../kernel/linux/tmp/lib/modules/* /mnt/lib/modules
sudo cp -r ../kernel/linux/tmp/boot/* /mnt/boot
ls -la /mnt/boot
sudo touch /mnt/boot/grub/grub.cfg
sudo vi /mnt/boot/grub/grub.cfg ( delete everything, add
set timeout=5
set default="Boot UUID"
set menu_color_normal=white/black
set menu_color_highlight=white/green

menuentry "Boot UUID" {
    search --no-floppy --fs-uuid --set=root 8b0fcbb9-5fe8-4735-b672-b0e6e8bcea6d
    echo    'Loading Linux 6.18.0-v8-16k+ ...'
    linux /boot/vmlinuz-6.18.0-v8-16k+ root=LABEL=rootfs rootwait rw rootdelay=10
    echo    'Loading initial ramdisk ...'
    initrd /boot/initrd.img-6.1.0-41-arm64    
    devicetree /boot/dtb/broadcom/bcm2712-rpi-5-b.dtb
}
)
Note: update above UUID accordingly.
sudo vi /mnt/etc/fstab ( change UUID for /boot/efi )
sudo cp ./packages/brcmfmac43455* /mnt/lib/firmware/brcm/
sudo cp ./packages/BCM4345C0* /mnt/lib/firmware/brcm/
sudo mkdir -p /mnt/lib/firmware/rtl_bt
sudo cp ./packages/rtl* /mnt/lib/firmware/rtl_bt/
ls -la /mnt/lib/firmware/rtl_bt
sync; sudo umount /mnt;
Eject usb3 stick from PC.

Plugin usb3 stick to rpi5, Remove wifi usb dongle from rpi5. Power on rpi5.
Forget wifi. Setup wifi. Disable power saving, auto suspend and screen saver.
su -
usermod -aG adm,sudo,video linaro
sync
reboot

sudo apt install openssh-server net-tools pulseaudio-utils
sudo ifconfig
uname -a
lsb_release -a
sudo apt update; sudo apt upgrade -y;
sync
free

Install mesa 25:
su -
export DEBIAN_FRONTEND=noninteractive
echo "deb http://deb.debian.org/debian bookworm-backports main" > /etc/apt/sources.list.d/backports.list
apt update
apt install -t bookworm-backports -y --no-install-recommends mesa-vulkan-drivers mesa-va-drivers libgl1-mesa-dri libglx-mesa0 libegl-mesa0 libgbm1 libgles2-mesa
ldconfig
exit
sync
free
sudo update-initramfs -u -k $(uname -r)
sudo vi /boot/grub/grub.cfg ( change to:
   initrd /boot/initrd.img-6.18.0-v8-16k+
)
sync
sudo reboot

uname -a
lsb_release -a
Check CPU speed:
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq

Check fan:
cat /proc/device-tree/cooling_fan/status
cat /sys/class/thermal/cooling_device0/type

Check if Debian is running UEFI mode:
ls /sys/firmware/efi
Check display mode: ( wayland or x11 )
echo $XDG_SESSION_TYPE
Check audio driver: ( pulseaudio or pipewire )
pactl info

sudo apt install git zip rfkill speedtest-cli python3-pip python3-setuptools ffmpeg mpv glmark2-es2-wayland pandoc firefox-esr vlc vlc-plugin-video-output vsftpd pavucontrol

speedtest-cli --secure

glmark2-es2-wayland

aplay -l
pavucontrol  ( select hdmi as default )

firefox -> youtube.com -> search YmDNhi07_Ho

Do follows on PC, then ftp swan.mp4 to rpi5.
(
git clone https://github.com/yt-dlp/yt-dlp.git
cd yt-dlp
make
cd ../
~/yt-dlp/yt-dlp -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]' 3qrKjywjo7Q -o swan.mp4 --postprocessor-args " -c:v libx265 -b:v 2M -c:a copy"
)

mpv --hwdec=auto-copy swan.mp4
ffplay swan.mp4
cvlc --gl=wgl --glconv=any swan.mp4

Plugin ASUS USB-BT500 bluetooth usb dongle to rpi5.
sudo rfkill list
hciconfig hci0
hcitool dev
hciconfig -a
